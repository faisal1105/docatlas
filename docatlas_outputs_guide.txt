DocAtlas Outputs Guide (All Modes)
==================================

This file summarizes what DocAtlas produces in each run mode, and shows
concrete sample output folder trees.

Core Outputs (Normal Processing Runs)
-------------------------------------
DocAtlas writes these files into the selected output folder:

1) <app_or_uncategorized>__docatlas_summaries.xlsx
   - Sheet: Documents
     Columns include:
       doc_id, file_key, category, tags, short_summary, long_summary,
       word_count, char_count, extraction_status, review_flags,
       duplicate_of, duplicate_score, duplicate_group_id,
       moved_to, file_name, file_path
   - Sheet: Articles
     Columns include:
       doc_id, file_key, article_index, article_title, article_summary,
       duplicate_of, duplicate_score, duplicate_group_id, file_name, file_path

2) <app_or_uncategorized>__docatlas_full_text.xlsx
   - Sheet: FullText
   - Full text is split across columns full_text_part_1..N to avoid the Excel
     32,767-char cell limit.

3) summary_report.txt
   - Totals: documents, articles, duplicate counts
   - Category and file type breakdown
   - Extraction status counts
   - OCR usage count
   - Duplicate group stats
   - Document length stats
   - Error list (if any)
   - Token estimate section

4) resume.json (when resume is enabled; default on)
   - Cache of extraction/summaries/embeddings/article summaries

5) last_run_stats.json
   - Runtime + settings used for future estimate baselines

6) docatlas.log
   - Detailed run log

File-Move Side Effects
----------------------
If moves are enabled (default), input files are moved into:
- <category>\ for non-duplicates
- <category>_Duplicate\ for duplicates

Low/no-text files are forced into category "Unreadable".


Mode-by-Mode Output Behavior
============================

1) GUI Normal Run (Atlas mode)
------------------------------
Produces all core output files above.
Moves files by category/duplicate rules.
Shows a progress window with stage + ETA while running.

Sample output tree:

output/
  docatlas.log
  resume.json
  last_run_stats.json
  Sequencing__docatlas_summaries.xlsx
  Sequencing__docatlas_full_text.xlsx
  summary_report.txt
  Sequencing/
    report_A.pdf
    notes_B.docx
  Sequencing_Duplicate/
    report_A_copy.pdf
  Unreadable/
    bad_scan_01.pdf


2) GUI Charter Mode (Preview / No Move)
---------------------------------------
Produces core output files (Excel/report/log/cache/stats).
Does NOT move source files.

Sample output tree:

output/
  docatlas.log
  resume.json
  last_run_stats.json
  qPCR__docatlas_summaries.xlsx
  qPCR__docatlas_full_text.xlsx
  summary_report.txt
  (no category folders created by move step)


3) CLI Normal Run (docatlas.py)
-------------------------------
Produces all core outputs.
Moves files unless --no-move / --charter-mode / --signal-scan is used.

Worker behavior:
- --workers 1  -> sequential pipeline
- --workers >1 -> parallel pipeline

Sample output tree:

output/
  docatlas.log
  resume.json
  last_run_stats.json
  Finance__docatlas_summaries.xlsx
  Finance__docatlas_full_text.xlsx
  summary_report.txt
  Finance/
    invoice_2025.xlsx
    policy.docx
  Finance_Duplicate/
    policy_copy.docx
  Unreadable/
    scan_without_text.pdf


4) CLI Dry Run (--dry-run)
--------------------------
No LLM/embeddings API calls.
No file moves.
Still writes report/log/stats and Excel outputs.
Summaries/tags are typically empty, and duplicates are hash-based only.

Sample output tree:

output/
  docatlas.log
  resume.json
  last_run_stats.json
  Legal__docatlas_summaries.xlsx
  Legal__docatlas_full_text.xlsx
  summary_report.txt
  (no category folders created by move step)


5) CLI No-Move Variants
-----------------------
These all disable moves:
- --no-move
- --charter-mode
- --signal-scan

Outputs match normal run except no category/duplicate folders from move step.

Sample output tree:

output/
  docatlas.log
  resume.json
  last_run_stats.json
  HR__docatlas_summaries.xlsx
  HR__docatlas_full_text.xlsx
  summary_report.txt
  (no category folders created by move step)


6) Test-Only Modes
------------------
a) --test-embeddings
   - Console only; exits after test.
   - Prints:
     "Embeddings OK. Vector length: <n>"
     or
     "Embeddings test failed: <error>"
   - No pipeline output files are generated by this mode itself.

b) --test-chat
   - Console only; exits after test.
   - Prints:
     "Chat OK. Response: <text>"
     or
     "Chat test failed: <error>"
   - No pipeline output files are generated by this mode itself.

Sample output tree:

output/
  (unchanged by test-only mode, unless you ran pipeline separately)


7) Config Editor Mode (--edit-config)
-------------------------------------
Opens GUI editor to update applications config JSON.
Does not run the processing pipeline.
No Excel/report outputs from this mode alone.

Sample output tree:

output/
  (unchanged unless a pipeline run is executed afterward)


8) Server Entrypoint (docatlas_server.py)
-----------------------------------------
Always runs parallel pipeline.
Produces same core outputs as normal processing runs.
Defaults to --workers 4 unless overridden.

Sample output tree:

output/
  docatlas.log
  resume.json
  last_run_stats.json
  qPCR__docatlas_summaries.xlsx
  qPCR__docatlas_full_text.xlsx
  summary_report.txt
  qPCR/
    run_001.pdf
    run_002.pdf
  qPCR_Duplicate/
    run_001_copy.pdf


Behavior Differences by Key Flags
=================================

--overwrite-excel
  Overwrites Excel outputs from scratch.
  Default behavior is append mode:
  existing sheets are loaded and existing docs are skipped by file key/path.

--embeddings-source full_text|summary|none
  full_text: duplicate detection with full-text embeddings
  summary:   duplicate detection with summary-based embeddings
  none:      hash-only duplicate detection

--limit N
  Processes only first N files and logs a rough estimate for full set runtime.


Minimal/No-Output Cases
=======================
- If no supported files are found, pipeline exits early after logging warning.
- Test-only and edit-config modes do not generate normal Excel/report outputs.

